<html>
<head>
  <script src="https://player.twitch.tv/js/embed/v1.js"></script>
  <script type="text/javascript">
    // Function to extract the channel name from the URL
    function getChannelName() {
      var url = window.location.href;
      var parts = url.split('/');
      return parts[parts.length - 1]; // Assuming the channel name is the last part of the URL
    }

    // Function to extract the domain from the URL
    function getDomain() {
      var url = window.location.hostname;
      return url; // Extracts the domain from the URL
    }

    // Function to update the src attributes of iframes
    function updateIframeSrcs() {
      var channelName = getChannelName();
      var domain = getDomain();

      // Update Twitch iframe
      var twitchIframe = document.getElementById('twitchIframe');
      var twitchSrc = "https://player.twitch.tv?channel=" + channelName + "&parent=" + domain;
      twitchIframe.setAttribute('src', twitchSrc);

      // Update CCT iframe
      var cctIframe = document.getElementById('cctIframe');
      var cctSrc = "/cct.html?body-background-color=transparent&channel=" + channelName;
      cctIframe.setAttribute('src', cctSrc);
    }

    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      updateIframeSrcs();
    });
  </script>
</head>

<body style="margin:0">
  <iframe id="twitchIframe" style='position:absolute; width:100%; height:100%;'
    src=""
    allowfullscreen="" scrolling="no" frameborder="0" allow="autoplay; fullscreen" title="Twitch"
    sandbox="allow-modals allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"></iframe>
  <iframe id="cctIframe" src="" style="position:absolute;height:97%;width:100%;"
    title="CCT"></iframe>
</body>
</html>
